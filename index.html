<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard SFICHIPSNORDESTE - Janeiro 2026</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #25D366;
            --primary-dark: #128C7E;
            --secondary: #54656F;
            --light-bg: #F0F2F5;
            --card-bg: #FFFFFF;
            --text-dark: #3B4A54;
            --text-light: #667781;
            --matrix-color: #2ecc71;
            --dealers-color: #e74c3c;
            --aspirado-color: #3498db;
            --turbo-color: #9b59b6;
            --border-radius: 12px;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Helvetica, Arial, sans-serif;
        }

        body {
            background-color: var(--light-bg);
            color: var(--text-dark);
            line-height: 1.6;
            padding: 20px;
        }

        .dashboard-container {
            max-width: 1800px;
            margin: 0 auto;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-dark), #2c3e50);
            color: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 24px;
            font-weight: 600;
        }

        .logo i {
            font-size: 28px;
        }

        .date-filter {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .date-input {
            padding: 8px 12px;
            border: none;
            border-radius: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 14px;
        }

        .filter-btn {
            padding: 8px 16px;
            border: none;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .filter-btn:hover {
            background: white;
            color: var(--primary-dark);
        }

        /* Resumo Geral Superior */
        .overall-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .summary-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
            text-align: center;
            transition: transform 0.3s ease;
        }

        .summary-card:hover {
            transform: translateY(-5px);
        }

        .summary-card.highlight {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
        }

        .summary-card.matrix-total {
            border-top: 4px solid var(--matrix-color);
        }

        .summary-card.dealers-total {
            border-top: 4px solid var(--dealers-color);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .card-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-light);
        }

        .summary-card.highlight .card-title {
            color: rgba(255, 255, 255, 0.9);
        }

        .card-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .leads-icon {
            background-color: var(--primary);
        }

        .investment-icon {
            background-color: var(--aspirado-color);
        }

        .cpl-icon {
            background-color: var(--turbo-color);
        }

        .matrix-icon {
            background-color: var(--matrix-color);
        }

        .dealers-icon {
            background-color: var(--dealers-color);
        }

        .card-value {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .summary-card.highlight .card-value {
            color: white;
        }

        .card-subvalue {
            font-size: 14px;
            color: var(--text-light);
            margin-top: 5px;
        }

        .summary-card.highlight .card-subvalue {
            color: rgba(255, 255, 255, 0.9);
        }

        .card-percentage {
            font-size: 18px;
            font-weight: 600;
            padding: 5px 15px;
            border-radius: 20px;
            display: inline-block;
            margin-top: 10px;
        }

        .positive {
            color: var(--primary);
            background-color: rgba(37, 211, 102, 0.1);
        }

        .matrix-percentage {
            color: var(--matrix-color);
            background-color: rgba(46, 204, 113, 0.1);
        }

        .dealers-percentage {
            color: var(--dealers-color);
            background-color: rgba(231, 76, 60, 0.1);
        }

        /* Comparação Detalhada */
        .section-title {
            font-size: 22px;
            margin: 30px 0 20px;
            color: var(--text-dark);
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary);
        }

        .comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .comparison-box {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 25px;
            box-shadow: var(--shadow);
        }

        .comparison-box.matrix {
            border-top: 5px solid var(--matrix-color);
        }

        .comparison-box.dealers {
            border-top: 5px solid var(--dealers-color);
        }

        .comparison-box h2 {
            font-size: 20px;
            margin-bottom: 20px;
            text-align: center;
            color: var(--text-dark);
        }

        .comparison-data {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        .comparison-item {
            text-align: center;
            padding: 20px;
            border-radius: 8px;
        }

        .comparison-item h3 {
            font-size: 14px;
            color: var(--text-light);
            margin-bottom: 10px;
        }

        .comparison-item .value {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .comparison-item .subvalue {
            font-size: 12px;
            color: var(--text-light);
        }

        .matrix-bg {
            background-color: rgba(46, 204, 113, 0.1);
        }

        .dealers-bg {
            background-color: rgba(231, 76, 60, 0.1);
        }

        .aspirado-bg {
            background-color: rgba(52, 152, 219, 0.1);
        }

        .turbo-bg {
            background-color: rgba(155, 89, 182, 0.1);
        }

        /* Gráficos */
        .charts-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-comparison-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .chart-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 25px;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .chart-title {
            font-size: 18px;
            font-weight: 600;
        }

        .chart-container {
            height: 300px;
            position: relative;
        }

        /* Tabela */
        .data-table-container {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 25px;
            margin-bottom: 30px;
            overflow-x: auto;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
            font-size: 14px;
        }

        .comparison-table th, .comparison-table td {
            padding: 12px 15px;
            text-align: center;
            border-bottom: 1px solid #e0e0e0;
        }

        .comparison-table th {
            background-color: var(--light-bg);
            font-weight: 600;
            color: var(--primary-dark);
            position: sticky;
            top: 0;
        }

        .comparison-table th:first-child {
            text-align: left;
        }

        .comparison-table td:first-child {
            text-align: left;
            font-weight: 600;
            color: var(--text-dark);
        }

        .comparison-table tr:hover {
            background-color: #f9f9f9;
        }

        .matrix-header {
            background-color: rgba(46, 204, 113, 0.1);
            color: var(--matrix-color);
        }

        .dealers-header {
            background-color: rgba(231, 76, 60, 0.1);
            color: var(--dealers-color);
        }

        .table-total {
            background-color: #f8f9fa;
            font-weight: bold;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            color: var(--text-light);
            font-size: 14px;
        }

        @media (max-width: 1200px) {
            .charts-container,
            .chart-comparison-container {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 992px) {
            .comparison-container {
                grid-template-columns: 1fr;
            }
            
            .overall-summary {
                grid-template-columns: 1fr;
            }
            
            .comparison-data {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            header {
                flex-direction: column;
                gap: 15px;
            }
            
            .date-filter {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
            }
            
            .comparison-table {
                font-size: 12px;
            }
            
            .comparison-table th, 
            .comparison-table td {
                padding: 8px 10px;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <header>
            <div class="logo">
                <i class="fab fa-whatsapp"></i>
                <span>SFICHIPSNORDESTE - Dashboard Janeiro 2026</span>
            </div>
            <div class="date-filter">
                <input type="date" id="startDate" class="date-input">
                <span style="color: white;">até</span>
                <input type="date" id="endDate" class="date-input">
                <button class="filter-btn" id="applyFilter">
                    <i class="fas fa-filter"></i> Filtrar Período
                </button>
            </div>
        </header>

        <!-- Resumo Geral Superior -->
        <div class="overall-summary">
            <div class="summary-card highlight">
                <div class="card-header">
                    <div class="card-title">TOTAL GERAL DE LEADS</div>
                    <div class="card-icon leads-icon">
                        <i class="fas fa-users"></i>
                    </div>
                </div>
                <div class="card-value" id="totalLeads">0</div>
                <div class="card-subvalue">Período: Janeiro 2026</div>
                <div class="card-percentage positive" id="totalGrowth">+0%</div>
            </div>

            <div class="summary-card">
                <div class="card-header">
                    <div class="card-title">INVESTIMENTO TOTAL</div>
                    <div class="card-icon investment-icon">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                </div>
                <div class="card-value" id="totalInvestment">R$ 0,00</div>
                <div class="card-subvalue">CPL Médio: <span id="averageCPL">R$ 0,00</span></div>
            </div>

            <div class="summary-card matrix-total">
                <div class="card-header">
                    <div class="card-title">MATRIZ - TOTAL</div>
                    <div class="card-icon matrix-icon">
                        <i class="fas fa-building"></i>
                    </div>
                </div>
                <div class="card-value" id="matrixTotalLeads">0</div>
                <div class="card-subvalue">Orçamento: <span id="matrixTotalBudget">R$ 0,00</span></div>
                <div class="card-percentage matrix-percentage" id="matrixShare">0% do total</div>
            </div>

            <div class="summary-card dealers-total">
                <div class="card-header">
                    <div class="card-title">DEALERS - TOTAL</div>
                    <div class="card-icon dealers-icon">
                        <i class="fas fa-store"></i>
                    </div>
                </div>
                <div class="card-value" id="dealersTotalLeads">0</div>
                <div class="card-subvalue">Orçamento: <span id="dealersTotalBudget">R$ 0,00</span></div>
                <div class="card-percentage dealers-percentage" id="dealersShare">0% do total</div>
            </div>
        </div>

        <!-- Comparação Matriz vs Dealers -->
        <h2 class="section-title">Comparativo Detalhado - Matriz vs Dealers</h2>
        <div class="comparison-container">
            <div class="comparison-box matrix">
                <h2>MATRIZ - DESEMPENHO</h2>
                <div class="comparison-data">
                    <div class="comparison-item matrix-bg">
                        <h3>Total de Leads</h3>
                        <div class="value" id="matrixLeads">0</div>
                        <div class="subvalue">Aspirado + Turbo</div>
                    </div>
                    <div class="comparison-item aspirado-bg">
                        <h3>Aspirado</h3>
                        <div class="value" id="matrixAspirado">0</div>
                        <div class="subvalue" id="matrixAspiradoShare">0% dos leads</div>
                    </div>
                    <div class="comparison-item turbo-bg">
                        <h3>Turbo</h3>
                        <div class="value" id="matrixTurbo">0</div>
                        <div class="subvalue" id="matrixTurboShare">0% dos leads</div>
                    </div>
                    <div class="comparison-item matrix-bg">
                        <h3>CPL Médio</h3>
                        <div class="value" id="matrixCPL">R$ 0,00</div>
                        <div class="subvalue">Custo por lead</div>
                    </div>
                </div>
            </div>
            
            <div class="comparison-box dealers">
                <h2>DEALERS - DESEMPENHO</h2>
                <div class="comparison-data">
                    <div class="comparison-item dealers-bg">
                        <h3>Total de Leads</h3>
                        <div class="value" id="dealersLeads">0</div>
                        <div class="subvalue">Aspirado + Turbo</div>
                    </div>
                    <div class="comparison-item aspirado-bg">
                        <h3>Aspirado</h3>
                        <div class="value" id="dealersAspirado">0</div>
                        <div class="subvalue" id="dealersAspiradoShare">0% dos leads</div>
                    </div>
                    <div class="comparison-item turbo-bg">
                        <h3>Turbo</h3>
                        <div class="value" id="dealersTurbo">0</div>
                        <div class="subvalue" id="dealersTurboShare">0% dos leads</div>
                    </div>
                    <div class="comparison-item dealers-bg">
                        <h3>CPL Médio</h3>
                        <div class="value" id="dealersCPL">R$ 0,00</div>
                        <div class="subvalue">Custo por lead</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gráficos Comparativos -->
        <h2 class="section-title">Análise Gráfica - Janeiro 2026</h2>
        <div class="chart-comparison-container">
            <div class="chart-card">
                <div class="chart-header">
                    <div class="chart-title">Leads por Dia - Matriz vs Dealers</div>
                </div>
                <div class="chart-container">
                    <canvas id="leadsComparisonChart"></canvas>
                </div>
            </div>
            <div class="chart-card">
                <div class="chart-header">
                    <div class="chart-title">Orçamento por Dia - Matriz vs Dealers</div>
                </div>
                <div class="chart-container">
                    <canvas id="budgetComparisonChart"></canvas>
                </div>
            </div>
        </div>

        <div class="chart-comparison-container">
            <div class="chart-card">
                <div class="chart-header">
                    <div class="chart-title">Matriz - Distribuição Aspirado vs Turbo</div>
                </div>
                <div class="chart-container">
                    <canvas id="matrixPieChart"></canvas>
                </div>
            </div>
            <div class="chart-card">
                <div class="chart-header">
                    <div class="chart-title">Dealers - Distribuição Aspirado vs Turbo</div>
                </div>
                <div class="chart-container">
                    <canvas id="dealersPieChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Tabela Detalhada -->
        <h2 class="section-title">Desempenho Diário Detalhado</h2>
        <div class="data-table-container">
            <table class="comparison-table">
                <thead>
                    <tr>
                        <th rowspan="2">Data</th>
                        <th rowspan="2">Total Leads</th>
                        <th rowspan="2">CPL</th>
                        <th rowspan="2">Orçamento Total</th>
                        <th colspan="6" class="matrix-header">MATRIZ</th>
                        <th colspan="4" class="dealers-header">DEALERS</th>
                    </tr>
                    <tr>
                        <th class="matrix-header">Aspirado</th>
                        <th class="matrix-header">Turbo</th>
                        <th class="matrix-header">Total</th>
                        <th class="matrix-header">Orçamento</th>
                        <th class="matrix-header">Aspirado</th>
                        <th class="matrix-header">Turbo</th>
                        <th class="dealers-header">Total</th>
                        <th class="dealers-header">Orçamento</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- Dados serão preenchidos via JavaScript -->
                </tbody>
                <tfoot>
                    <tr class="table-total" id="tableTotal">
                        <!-- Total será preenchido via JavaScript -->
                    </tr>
                </tfoot>
            </table>
        </div>

        <!-- Gráficos de Tendência -->
        <h2 class="section-title">Tendências e Evolução</h2>
        <div class="charts-container">
            <div class="chart-card">
                <div class="chart-header">
                    <div class="chart-title">Evolução de Leads - Período Completo</div>
                </div>
                <div class="chart-container">
                    <canvas id="leadsTrendChart"></canvas>
                </div>
            </div>
            <div class="chart-card">
                <div class="chart-header">
                    <div class="chart-title">Distribuição Total - Matriz vs Dealers</div>
                </div>
                <div class="chart-container">
                    <canvas id="channelDistributionChart"></canvas>
                </div>
            </div>
        </div>

        <footer>
            <p>Dashboard SFICHIPSNORDESTE - Análise de Performance Janeiro 2026 | Última atualização: 21/01/2026</p>
            <p>Desenvolvido para análise estratégica de marketing e performance</p>
        </footer>
    </div>

    <script>
        // Dados de Janeiro 2026
        const rawData = [
            {data: '2026-01-01', totalLeads: 72, cpl: 4.05, totalBudget: 291.54, 
             matrizAspirado: 12, matrizTurbo: 17, matrizTotal: 29, matrizBudget: 117.43,
             dealersAspirado: 21, dealersTurbo: 17, dealersTotal: 38, dealersBudget: 153.87},
             
            {data: '2026-01-02', totalLeads: 86, cpl: 3.56, totalBudget: 306.36,
             matrizAspirado: 21, matrizTurbo: 20, matrizTotal: 41, matrizBudget: 146.06,
             dealersAspirado: 26, dealersTurbo: 17, dealersTotal: 43, dealersBudget: 153.18},
             
            {data: '2026-01-03', totalLeads: 78, cpl: 3.70, totalBudget: 288.42,
             matrizAspirado: 20, matrizTurbo: 7, matrizTotal: 27, matrizBudget: 99.84,
             dealersAspirado: 20, dealersTurbo: 26, dealersTotal: 46, dealersBudget: 170.09},
             
            {data: '2026-01-04', totalLeads: 108, cpl: 2.91, totalBudget: 314.32,
             matrizAspirado: 19, matrizTurbo: 13, matrizTotal: 32, matrizBudget: 93.13,
             dealersAspirado: 45, dealersTurbo: 27, dealersTotal: 72, dealersBudget: 209.55},
             
            {data: '2026-01-05', totalLeads: 70, cpl: 4.10, totalBudget: 287.08,
             matrizAspirado: 18, matrizTurbo: 12, matrizTotal: 30, matrizBudget: 123.03,
             dealersAspirado: 17, dealersTurbo: 19, dealersTotal: 36, dealersBudget: 147.64},
             
            {data: '2026-01-06', totalLeads: 78, cpl: 3.77, totalBudget: 294.03,
             matrizAspirado: 0, matrizTurbo: 0, matrizTotal: 0, matrizBudget: 0.00,
             dealersAspirado: 2, dealersTurbo: 1, dealersTotal: 3, dealersBudget: 11.31},
             
            {data: '2026-01-07', totalLeads: 55, cpl: 5.29, totalBudget: 291.05,
             matrizAspirado: 27, matrizTurbo: 14, matrizTotal: 41, matrizBudget: 216.96,
             dealersAspirado: 37, dealersTurbo: 43, dealersTotal: 80, dealersBudget: 423.35},
             
            {data: '2026-01-08', totalLeads: 76, cpl: 3.69, totalBudget: 280.06,
             matrizAspirado: 17, matrizTurbo: 12, matrizTotal: 29, matrizBudget: 106.87,
             dealersAspirado: 17, dealersTurbo: 27, dealersTotal: 44, dealersBudget: 162.14},
             
            {data: '2026-01-09', totalLeads: 56, cpl: 5.24, totalBudget: 293.61,
             matrizAspirado: 8, matrizTurbo: 9, matrizTotal: 17, matrizBudget: 89.13,
             dealersAspirado: 6, dealersTurbo: 8, dealersTotal: 14, dealersBudget: 73.40},
             
            {data: '2026-01-10', totalLeads: 56, cpl: 4.97, totalBudget: 278.12,
             matrizAspirado: 26, matrizTurbo: 16, matrizTotal: 42, matrizBudget: 208.59,
             dealersAspirado: 10, dealersTurbo: 26, dealersTotal: 36, dealersBudget: 178.79},
             
            {data: '2026-01-11', totalLeads: 71, cpl: 4.52, totalBudget: 320.96,
             matrizAspirado: 22, matrizTurbo: 8, matrizTotal: 30, matrizBudget: 135.62,
             dealersAspirado: 18, dealersTurbo: 22, dealersTotal: 40, dealersBudget: 180.82},
             
            {data: '2026-01-12', totalLeads: 75, cpl: 4.08, totalBudget: 305.73,
             matrizAspirado: 14, matrizTurbo: 9, matrizTotal: 23, matrizBudget: 93.76,
             dealersAspirado: 23, dealersTurbo: 24, dealersTotal: 47, dealersBudget: 191.59},
             
            {data: '2026-01-13', totalLeads: 90, cpl: 3.24, totalBudget: 291.38,
             matrizAspirado: 17, matrizTurbo: 13, matrizTotal: 30, matrizBudget: 97.13,
             dealersAspirado: 34, dealersTurbo: 21, dealersTotal: 55, dealersBudget: 178.07},
             
            {data: '2026-01-14', totalLeads: 74, cpl: 3.96, totalBudget: 293.07,
             matrizAspirado: 18, matrizTurbo: 7, matrizTotal: 25, matrizBudget: 99.01,
             dealersAspirado: 12, dealersTurbo: 26, dealersTotal: 38, dealersBudget: 150.50},
             
            {data: '2026-01-15', totalLeads: 94, cpl: 2.98, totalBudget: 279.85,
             matrizAspirado: 17, matrizTurbo: 13, matrizTotal: 30, matrizBudget: 89.31,
             dealersAspirado: 35, dealersTurbo: 22, dealersTotal: 57, dealersBudget: 169.70},
             
            {data: '2026-01-16', totalLeads: 68, cpl: 4.24, totalBudget: 288.00,
             matrizAspirado: 12, matrizTurbo: 9, matrizTotal: 21, matrizBudget: 88.94,
             dealersAspirado: 17, dealersTurbo: 25, dealersTotal: 42, dealersBudget: 177.88},
             
            {data: '2026-01-17', totalLeads: 74, cpl: 3.91, totalBudget: 289.60,
             matrizAspirado: 13, matrizTurbo: 10, matrizTotal: 23, matrizBudget: 90.01,
             dealersAspirado: 21, dealersTurbo: 21, dealersTotal: 42, dealersBudget: 164.37},
             
            {data: '2026-01-18', totalLeads: 91, cpl: 3.58, totalBudget: 326.03,
             matrizAspirado: 20, matrizTurbo: 18, matrizTotal: 38, matrizBudget: 136.14,
             dealersAspirado: 24, dealersTurbo: 22, dealersTotal: 46, dealersBudget: 164.81},
             
            {data: '2026-01-19', totalLeads: 69, cpl: 4.36, totalBudget: 301.03,
             matrizAspirado: 13, matrizTurbo: 16, matrizTotal: 29, matrizBudget: 126.52,
             dealersAspirado: 17, dealersTurbo: 15, dealersTotal: 32, dealersBudget: 139.61},
             
            {data: '2026-01-20', totalLeads: 76, cpl: 3.88, totalBudget: 294.64,
             matrizAspirado: 15, matrizTurbo: 8, matrizTotal: 23, matrizBudget: 89.17,
             dealersAspirado: 29, dealersTurbo: 14, dealersTotal: 43, dealersBudget: 166.70},
             
            {data: '2026-01-21', totalLeads: 68, cpl: 4.15, totalBudget: 282.45,
             matrizAspirado: 25, matrizTurbo: 8, matrizTotal: 33, matrizBudget: 137.07,
             dealersAspirado: 40, dealersTurbo: 21, dealersTotal: 61, dealersBudget: 253.37}
        ];

        // Dados de resumo geral (Data Específica)
        const summaryData = {
            totalLeads: 1600,
            cpl: 3.92,
            totalBudget: 6266.60,
            matrizAspirado: 877,
            matrizTurbo: 548,
            matrizTotal: 1425,
            matrizBudget: 2420.66,
            dealersAspirado: 1298,
            dealersTurbo: 946,
            dealersTotal: 2244,
            dealersBudget: 3703.86
        };

        // Variáveis para os gráficos
        let leadsComparisonChart, budgetComparisonChart, matrixPieChart, dealersPieChart, leadsTrendChart, channelDistributionChart;

        document.addEventListener('DOMContentLoaded', function() {
            // Configurar datas padrão (Janeiro 2026)
            const startDate = '2026-01-01';
            const endDate = '2026-01-21';
            
            document.getElementById('startDate').value = startDate;
            document.getElementById('endDate').value = endDate;
            
            // Aplicar filtro inicial
            applyDateFilter();
            
            // Configurar evento do botão de filtro
            document.getElementById('applyFilter').addEventListener('click', applyDateFilter);
        });

        function applyDateFilter() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;
            
            if (!startDate || !endDate) {
                alert('Por favor, selecione ambas as datas.');
                return;
            }
            
            if (startDate > endDate) {
                alert('A data inicial não pode ser maior que a data final.');
                return;
            }
            
            // Filtrar dados pelo período selecionado
            const filteredData = rawData.filter(item => {
                return item.data >= startDate && item.data <= endDate;
            });
            
            // Calcular métricas e atualizar interface
            calculateMetrics(filteredData);
            updateTable(filteredData);
            updateCharts(filteredData);
        }

        function calculateMetrics(data) {
            if (data.length === 0) {
                alert('Nenhum dado encontrado para o período selecionado.');
                return;
            }
            
            // Calcular totais do período filtrado
            let totalLeads = 0;
            let totalBudget = 0;
            
            let matrixTotalLeads = 0;
            let matrixTotalBudget = 0;
            let matrixAspiradoLeads = 0;
            let matrixTurboLeads = 0;
            
            let dealersTotalLeads = 0;
            let dealersTotalBudget = 0;
            let dealersAspiradoLeads = 0;
            let dealersTurboLeads = 0;
            
            data.forEach(item => {
                totalLeads += item.totalLeads;
                totalBudget += item.totalBudget;
                
                matrixTotalLeads += item.matrizTotal;
                matrixTotalBudget += item.matrizBudget;
                matrixAspiradoLeads += item.matrizAspirado;
                matrixTurboLeads += item.matrizTurbo;
                
                dealersTotalLeads += item.dealersTotal;
                dealersTotalBudget += item.dealersBudget;
                dealersAspiradoLeads += item.dealersAspirado;
                dealersTurboLeads += item.dealersTurbo;
            });
            
            // Calcular CPLs
            const averageCPL = totalLeads > 0 ? totalBudget / totalLeads : 0;
            const matrixCPL = matrixTotalLeads > 0 ? matrixTotalBudget / matrixTotalLeads : 0;
            const dealersCPL = dealersTotalLeads > 0 ? dealersTotalBudget / dealersTotalLeads : 0;
            
            // Calcular shares
            const matrixShare = totalLeads > 0 ? (matrixTotalLeads / totalLeads) * 100 : 0;
            const dealersShare = totalLeads > 0 ? (dealersTotalLeads / totalLeads) * 100 : 0;
            
            const matrixAspiradoShare = matrixTotalLeads > 0 ? (matrixAspiradoLeads / matrixTotalLeads) * 100 : 0;
            const matrixTurboShare = matrixTotalLeads > 0 ? (matrixTurboLeads / matrixTotalLeads) * 100 : 0;
            
            const dealersAspiradoShare = dealersTotalLeads > 0 ? (dealersAspiradoLeads / dealersTotalLeads) * 100 : 0;
            const dealersTurboShare = dealersTotalLeads > 0 ? (dealersTurboLeads / dealersTotalLeads) * 100 : 0;
            
            // Calcular crescimento vs resumo geral
            const growthVsSummary = summaryData.totalLeads > 0 ? 
                ((totalLeads / summaryData.totalLeads) * 100) - 100 : 0;
            
            // Atualizar interface - Resumo Geral Superior
            document.getElementById('totalLeads').textContent = totalLeads.toLocaleString();
            document.getElementById('totalInvestment').textContent = `R$ ${totalBudget.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            document.getElementById('averageCPL').textContent = `R$ ${averageCPL.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            
            // Crescimento
            const growthElement = document.getElementById('totalGrowth');
            growthElement.textContent = growthVsSummary >= 0 ? `+${growthVsSummary.toFixed(1)}%` : `${growthVsSummary.toFixed(1)}%`;
            growthElement.className = growthVsSummary >= 0 ? 'card-percentage positive' : 'card-percentage negative';
            
            // Matriz
            document.getElementById('matrixTotalLeads').textContent = matrixTotalLeads.toLocaleString();
            document.getElementById('matrixTotalBudget').textContent = `R$ ${matrixTotalBudget.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            document.getElementById('matrixShare').textContent = `${matrixShare.toFixed(1)}% do total`;
            
            // Dealers
            document.getElementById('dealersTotalLeads').textContent = dealersTotalLeads.toLocaleString();
            document.getElementById('dealersTotalBudget').textContent = `R$ ${dealersTotalBudget.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            document.getElementById('dealersShare').textContent = `${dealersShare.toFixed(1)}% do total`;
            
            // Atualizar Comparação Detalhada
            document.getElementById('matrixLeads').textContent = matrixTotalLeads.toLocaleString();
            document.getElementById('matrixAspirado').textContent = matrixAspiradoLeads.toLocaleString();
            document.getElementById('matrixTurbo').textContent = matrixTurboLeads.toLocaleString();
            document.getElementById('matrixCPL').textContent = `R$ ${matrixCPL.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            document.getElementById('matrixAspiradoShare').textContent = `${matrixAspiradoShare.toFixed(1)}% dos leads`;
            document.getElementById('matrixTurboShare').textContent = `${matrixTurboShare.toFixed(1)}% dos leads`;
            
            document.getElementById('dealersLeads').textContent = dealersTotalLeads.toLocaleString();
            document.getElementById('dealersAspirado').textContent = dealersAspiradoLeads.toLocaleString();
            document.getElementById('dealersTurbo').textContent = dealersTurboLeads.toLocaleString();
            document.getElementById('dealersCPL').textContent = `R$ ${dealersCPL.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2})}`;
            document.getElementById('dealersAspiradoShare').textContent = `${dealersAspiradoShare.toFixed(1)}% dos leads`;
            document.getElementById('dealersTurboShare').textContent = `${dealersTurboShare.toFixed(1)}% dos leads`;
        }

        function updateTable(data) {
            const tableBody = document.getElementById('tableBody');
            const tableTotal = document.getElementById('tableTotal');
            tableBody.innerHTML = '';
            
            // Variáveis para calcular totais da tabela
            let totals = {
                totalLeads: 0,
                totalBudget: 0,
                matrizAspirado: 0,
                matrizTurbo: 0,
                matrizTotal: 0,
                matrizBudget: 0,
                dealersAspirado: 0,
                dealersTurbo: 0,
                dealersTotal: 0,
                dealersBudget: 0
            };
            
            data.forEach(row => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${formatDisplayDate(row.data)}</td>
                    <td>${row.totalLeads}</td>
                    <td>${row.cpl}</td>
                    <td>${row.totalBudget.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td>${row.matrizAspirado}</td>
                    <td>${row.matrizTurbo}</td>
                    <td>${row.matrizTotal}</td>
                    <td>${row.matrizBudget.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                    <td>${row.dealersAspirado}</td>
                    <td>${row.dealersTurbo}</td>
                    <td>${row.dealersTotal}</td>
                    <td>${row.dealersBudget.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</td>
                `;
                tableBody.appendChild(tr);
                
                // Somar para totais
                totals.totalLeads += row.totalLeads;
                totals.totalBudget += row.totalBudget;
                totals.matrizAspirado += row.matrizAspirado;
                totals.matrizTurbo += row.matrizTurbo;
                totals.matrizTotal += row.matrizTotal;
                totals.matrizBudget += row.matrizBudget;
                totals.dealersAspirado += row.dealersAspirado;
                totals.dealersTurbo += row.dealersTurbo;
                totals.dealersTotal += row.dealersTotal;
                totals.dealersBudget += row.dealersBudget;
            });
            
            // Calcular CPL médio da tabela
            const avgCPL = totals.totalLeads > 0 ? totals.totalBudget / totals.totalLeads : 0;
            
            // Atualizar linha de totais
            tableTotal.innerHTML = `
                <td><strong>TOTAL</strong></td>
                <td><strong>${totals.totalLeads}</strong></td>
                <td><strong>${avgCPL.toFixed(2)}</strong></td>
                <td><strong>${totals.totalBudget.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</strong></td>
                <td><strong>${totals.matrizAspirado}</strong></td>
                <td><strong>${totals.matrizTurbo}</strong></td>
                <td><strong>${totals.matrizTotal}</strong></td>
                <td><strong>${totals.matrizBudget.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</strong></td>
                <td><strong>${totals.dealersAspirado}</strong></td>
                <td><strong>${totals.dealersTurbo}</strong></td>
                <td><strong>${totals.dealersTotal}</strong></td>
                <td><strong>${totals.dealersBudget.toLocaleString('pt-BR', {minimumFractionDigits: 2, maximumFractionDigits: 2})}</strong></td>
            `;
        }

        function updateCharts(data) {
            // Ordenar dados por data
            const sortedData = [...data].sort((a, b) => new Date(a.data) - new Date(b.data));
            
            // Preparar dados para os gráficos
            const labels = sortedData.map(item => formatDisplayDate(item.data));
            const matrixLeadsData = sortedData.map(item => item.matrizTotal);
            const dealersLeadsData = sortedData.map(item => item.dealersTotal);
            const matrixBudgetData = sortedData.map(item => item.matrizBudget);
            const dealersBudgetData = sortedData.map(item => item.dealersBudget);
            const totalLeadsData = sortedData.map(item => item.totalLeads);
            
            // Calcular totais para gráficos de pizza
            const matrixAspiradoTotal = sortedData.reduce((sum, item) => sum + item.matrizAspirado, 0);
            const matrixTurboTotal = sortedData.reduce((sum, item) => sum + item.matrizTurbo, 0);
            const dealersAspiradoTotal = sortedData.reduce((sum, item) => sum + item.dealersAspirado, 0);
            const dealersTurboTotal = sortedData.reduce((sum, item) => sum + item.dealersTurbo, 0);
            
            // Atualizar gráficos
            updateLeadsComparisonChart(labels, matrixLeadsData, dealersLeadsData);
            updateBudgetComparisonChart(labels, matrixBudgetData, dealersBudgetData);
            updateMatrixPieChart(matrixAspiradoTotal, matrixTurboTotal);
            updateDealersPieChart(dealersAspiradoTotal, dealersTurboTotal);
            updateLeadsTrendChart(labels, totalLeadsData, matrixLeadsData, dealersLeadsData);
            updateChannelDistributionChart(matrixAspiradoTotal + matrixTurboTotal, dealersAspiradoTotal + dealersTurboTotal);
        }

        function updateLeadsComparisonChart(labels, matrixData, dealersData) {
            const ctx = document.getElementById('leadsComparisonChart').getContext('2d');
            
            if (leadsComparisonChart) {
                leadsComparisonChart.destroy();
            }
            
            leadsComparisonChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Matriz',
                            data: matrixData,
                            backgroundColor: 'rgba(46, 204, 113, 0.7)',
                            borderColor: '#2ecc71',
                            borderWidth: 1
                        },
                        {
                            label: 'Dealers',
                            data: dealersData,
                            backgroundColor: 'rgba(231, 76, 60, 0.7)',
                            borderColor: '#e74c3c',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Quantidade de Leads'
                            }
                        }
                    }
                }
            });
        }

        function updateBudgetComparisonChart(labels, matrixData, dealersData) {
            const ctx = document.getElementById('budgetComparisonChart').getContext('2d');
            
            if (budgetComparisonChart) {
                budgetComparisonChart.destroy();
            }
            
            budgetComparisonChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Matriz',
                            data: matrixData,
                            backgroundColor: 'rgba(46, 204, 113, 0.7)',
                            borderColor: '#2ecc71',
                            borderWidth: 1
                        },
                        {
                            label: 'Dealers',
                            data: dealersData,
                            backgroundColor: 'rgba(231, 76, 60, 0.7)',
                            borderColor: '#e74c3c',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Orçamento (R$)'
                            }
                        }
                    }
                }
            });
        }

        function updateMatrixPieChart(aspirado, turbo) {
            const ctx = document.getElementById('matrixPieChart').getContext('2d');
            
            if (matrixPieChart) {
                matrixPieChart.destroy();
            }
            
            matrixPieChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Aspirado', 'Turbo'],
                    datasets: [{
                        data: [aspirado, turbo],
                        backgroundColor: ['rgba(52, 152, 219, 0.7)', 'rgba(155, 89, 182, 0.7)'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = Math.round((value / total) * 100);
                                    return `${label}: ${value} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateDealersPieChart(aspirado, turbo) {
            const ctx = document.getElementById('dealersPieChart').getContext('2d');
            
            if (dealersPieChart) {
                dealersPieChart.destroy();
            }
            
            dealersPieChart = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Aspirado', 'Turbo'],
                    datasets: [{
                        data: [aspirado, turbo],
                        backgroundColor: ['rgba(52, 152, 219, 0.7)', 'rgba(155, 89, 182, 0.7)'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.label || '';
                                    const value = context.raw || 0;
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = Math.round((value / total) * 100);
                                    return `${label}: ${value} (${percentage}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }

        function updateLeadsTrendChart(labels, totalData, matrixData, dealersData) {
            const ctx = document.getElementById('leadsTrendChart').getContext('2d');
            
            if (leadsTrendChart) {
                leadsTrendChart.destroy();
            }
            
            leadsTrendChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: 'Total de Leads',
                            data: totalData,
                            borderColor: '#3498db',
                            backgroundColor: 'rgba(52, 152, 219, 0.1)',
                            fill: true,
                            tension: 0.3
                        },
                        {
                            label: 'Leads Matriz',
                            data: matrixData,
                            borderColor: '#2ecc71',
                            backgroundColor: 'rgba(46, 204, 113, 0.1)',
                            fill: true,
                            tension: 0.3
                        },
                        {
                            label: 'Leads Dealers',
                            data: dealersData,
                            borderColor: '#e74c3c',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            fill: true,
                            tension: 0.3
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        function updateChannelDistributionChart(matrixTotal, dealersTotal) {
            const ctx = document.getElementById('channelDistributionChart').getContext('2d');
            
            if (channelDistributionChart) {
                channelDistributionChart.destroy();
            }
            
            channelDistributionChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Matriz', 'Dealers'],
                    datasets: [{
                        data: [matrixTotal, dealersTotal],
                        backgroundColor: ['#2ecc71', '#e74c3c'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        }
                    }
                }
            });
        }

        function formatDisplayDate(dateString) {
            const date = new Date(dateString);
            const day = date.getDate().toString().padStart(2, '0');
            const month = (date.getMonth() + 1).toString().padStart(2, '0');
            return `${day}/${month}`;
        }
    </script>
</body>
</html>
